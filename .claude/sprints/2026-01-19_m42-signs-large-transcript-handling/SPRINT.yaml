# SPRINT.yaml - Workflow-based Sprint Definition
# Sprint: Large Transcript Handling for m42-signs Plugin

workflow: plugin-development

steps:
  - prompt: |
      Create preprocessing scripts for m42-signs plugin to handle large transcripts.

      Create these 3 bash scripts in plugins/m42-signs/scripts/:

      1. extract-reasoning.sh - Extract assistant text blocks using jq
      2. transcript-summary.sh - Generate quick stats (line count, errors, tool sequence)
      3. find-learning-lines.sh - Pattern-match high-value reasoning lines

      All scripts should:
      - Use jq for JSON processing
      - Check for jq availability with clear error
      - Follow the patterns in parse-transcript.sh (deprecated reference)
      - Be executable (chmod +x)

      See context/plan.md for detailed implementation specs.

  - prompt: |
      Create chunk-analyzer subagent for parallel transcript analysis.

      Create: plugins/m42-signs/agents/chunk-analyzer.md

      Subagent spec:
      - name: chunk-analyzer
      - description: Analyze preprocessed transcript chunk for learning extraction
      - tools: Read, Bash
      - model: sonnet
      - color: cyan (research/analysis)

      The subagent should analyze preprocessed reasoning chunks and extract
      learnings in backlog YAML format.

      See context/plan.md for full subagent definition.

  - prompt: |
      Enhance extract.md command with large transcript handling workflow.

      Modify: plugins/m42-signs/commands/extract.md

      Add:
      1. Size detection in preflight checks (after line 30)
      2. New arguments: --preprocess-only, --parallel
      3. Large Transcript Handling section with preprocessing workflow
      4. Instructions for using chunk-analyzer subagent

      The command should automatically detect large transcripts (>100 lines or >500KB)
      and activate preprocessing mode.

      See context/plan.md for exact changes.

  - prompt: |
      Create documentation for large transcript handling.

      Create: plugins/m42-signs/docs/how-to/handle-large-transcripts.md

      Document:
      - Automatic preprocessing activation
      - Manual preprocessing workflow
      - When to use --parallel flag
      - Size thresholds table
      - Artifacts generated

      Follow AI-ready documentation principles (frontmatter, keywords, structure).

  - prompt: |
      Test the complete large transcript handling workflow.

      Test using the actual large transcript:
      .claude/sprints/2026-01-18_ralph-mode-implementation/transcripts/development-step-0-execute.jsonl

      Verify:
      1. All 3 scripts execute without errors
      2. Scripts reduce file size as expected
      3. Extract command detects large transcript
      4. Preprocessing artifacts are created
      5. Full extraction completes successfully

      Fix any issues discovered during testing.

# Sprint metadata
sprint-id: 2026-01-19_m42-signs-large-transcript-handling
name: m42-signs-large-transcript-handling
created: 2026-01-19T23:36:00Z
